window.__require=function e(i,t,o){function n(a,c){if(!t[a]){if(!i[a]){var s=a.split("/");if(s=s[s.length-1],!i[s]){var d="function"==typeof __require&&__require;if(!c&&d)return d(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+a+"'")}}var u=t[a]={exports:{}};i[a][0].call(u.exports,function(e){return n(i[a][1][e]||e)},u,u.exports,e,i,t,o)}return t[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<o.length;a++)n(o[a]);return n}({ActiveRoute:[function(e,i,t){"use strict";cc._RF.push(i,"06305obaJhF/Ke7jpqwM4bV","ActiveRoute"),Object.defineProperty(t,"__esModule",{value:!0});var o=e("./GameData"),n=e("./Helper"),r=e("./IdleAirlineTycoon/Airplane"),a=e("./IdleAirlineTycoon/Demand");t.DIST_TO_MILE_MULTIPLIER=5.11,t.BASE_SPEED_MPH=250,t.REAL_HOUR_TO_GAME_SEC=4;var c=function(){function e(e,i,t,o){this.origin=e,this.destination=i,this.cost=t,this.id=o,this.level=1,this.direction=1,this.location=0,this.passengerCount=0,this.calculateDistance()}return e.prototype.calculateDistance=function(){var e;e=n.distance(this.origin,this.destination),this.originNode=e[0],this.destinationNode=e[1],this.distance=e[2],this.distance=this.distance*t.DIST_TO_MILE_MULTIPLIER},e.prototype.upgrade=function(){var e=this.upgradeCost();o.D.cash<e||(o.D.cash-=e,this.level++)},e.prototype.upgradeCost=function(){return this.cost*Math.pow(1.1,this.level-1)},e.prototype.toJSON=function(){return{origin:this.origin,destination:this.destination,level:this.level,cost:this.cost,id:this.id,direction:this.direction,location:this.location,passengerCount:this.passengerCount}},e.prototype.duration=function(){return this.distance/this.speed()},e.prototype.durationInGameTime=function(){return this.duration()*t.REAL_HOUR_TO_GAME_SEC},e.prototype.tick=function(e){var i=this.airplane();this.location>=1&&(this.direction=-1,o.D.population[this.destination]+=this.passengerCount,this.passengerCount=Math.min(this.destinationDemand(),i.capacity),o.D.population[this.destination]-=this.passengerCount,o.D.cash+=this.passengerCount*i.ticketPrice),this.location<=0&&(this.direction=1,o.D.population[this.origin]+=this.passengerCount,this.passengerCount=Math.min(this.originDemand(),i.capacity),o.D.population[this.origin]-=this.passengerCount,o.D.cash+=this.passengerCount*i.ticketPrice),this.location=cc.misc.clamp01(this.location+e*this.direction/this.durationInGameTime())},e.prototype.cashPerMin=function(){var e=this.airplane();return 60*this.averageDemand()*e.ticketPrice/this.durationInGameTime()},e.prototype.flightTimeLeft=function(){return this.direction>0?this.duration()*(1-this.location):this.duration()*this.location},e.prototype.airplane=function(){var e=this;return r.AirplaneList.findLast(function(i){return e.level>=i.levelRequired})},e.prototype.originCode=function(){return this.origin.split(" (")[1].substr(0,3)},e.prototype.originCity=function(){return this.origin.split(" (")[0]},e.prototype.destinationCode=function(){return this.destination.split(" (")[1].substr(0,3)},e.prototype.destinationCity=function(){return this.destination.split(" (")[0]},e.prototype.speed=function(){return this.airplane().speedModifier*t.BASE_SPEED_MPH},e.prototype.originDemand=function(){return Math.round(s(this.origin).demandForEachRoute*o.D.population[this.origin])},e.prototype.destinationDemand=function(){return Math.round(s(this.destination).demandForEachRoute*o.D.population[this.destination])},e.prototype.averageDemand=function(){return(this.originDemand()+this.destinationDemand())/2},e.prototype.originOccupancy=function(){var e=this.airplane().capacity;return Math.min(1,this.originDemand()/e)},e.prototype.destinationOccupancy=function(){var e=this.airplane().capacity;return Math.min(1,this.destinationDemand()/e)},e.prototype.averageOccupancy=function(){return(this.originOccupancy()+this.destinationOccupancy())/2},e}();function s(e){var i=o.D.routes.filter(function(i){return i.origin===e||i.destination===e}).length;return a.DemandList.find(function(e){return e.numberOfRoutes===i})}t.ActiveRoute=c,cc._RF.pop()},{"./GameData":"GameData","./Helper":"Helper","./IdleAirlineTycoon/Airplane":"Airplane","./IdleAirlineTycoon/Demand":"Demand"}],Airplane:[function(e,i,t){"use strict";cc._RF.push(i,"040476FkctEjbsW8FBT/S9x","Airplane"),Object.defineProperty(t,"__esModule",{value:!0}),t.AirplaneList=[{id:"Saab 340",fullName:"",levelRequired:1,multiplier:1,capacity:50,ticketPrice:100,speedModifier:1},{id:"ATR 42",fullName:"",levelRequired:20,multiplier:2,capacity:60,ticketPrice:200,speedModifier:1.02},{id:"Embraer 140",fullName:"",levelRequired:30,multiplier:3,capacity:70,ticketPrice:300,speedModifier:1.04},{id:"CRJ900",fullName:"Bombardier CRJ700",levelRequired:40,multiplier:4,capacity:80,ticketPrice:400,speedModifier:1.06},{id:"ATR 72",fullName:"",levelRequired:50,multiplier:5,capacity:90,ticketPrice:500,speedModifier:1.08},{id:"Embraer 170",fullName:"",levelRequired:60,multiplier:6,capacity:100,ticketPrice:600,speedModifier:1.1},{id:"DHC-8",fullName:"De Havilland Canada Dash 8",levelRequired:70,multiplier:7,capacity:110,ticketPrice:700,speedModifier:1.12},{id:"BAE 146",fullName:"",levelRequired:80,multiplier:8,capacity:120,ticketPrice:800,speedModifier:1.14},{id:"Embraer 190",fullName:"",levelRequired:90,multiplier:9,capacity:130,ticketPrice:900,speedModifier:1.16},{id:"MD-80",fullName:"McDonnell Douglas MD-80",levelRequired:100,multiplier:10,capacity:140,ticketPrice:1e3,speedModifier:1.18},{id:"Boeing 717",fullName:"",levelRequired:110,multiplier:11,capacity:150,ticketPrice:1100,speedModifier:1.2},{id:"Airbus A310",fullName:"",levelRequired:120,multiplier:12,capacity:160,ticketPrice:1200,speedModifier:1.22},{id:"MD-90",fullName:"McDonnell Douglas MD-90",levelRequired:130,multiplier:13,capacity:170,ticketPrice:1300,speedModifier:1.24},{id:"Boeing 737",fullName:"",levelRequired:140,multiplier:14,capacity:180,ticketPrice:1400,speedModifier:1.26},{id:"Airbus A320",fullName:"",levelRequired:150,multiplier:15,capacity:190,ticketPrice:1500,speedModifier:1.28},{id:"Airbus A300",fullName:"",levelRequired:160,multiplier:16,capacity:200,ticketPrice:1600,speedModifier:1.3},{id:"Boeing 757",fullName:"",levelRequired:170,multiplier:17,capacity:250,ticketPrice:1700,speedModifier:1.32},{id:"Boeing 767",fullName:"",levelRequired:180,multiplier:18,capacity:270,ticketPrice:1800,speedModifier:1.34},{id:"Airbus A330",fullName:"",levelRequired:190,multiplier:19,capacity:300,ticketPrice:1900,speedModifier:1.36},{id:"Boeing 777",fullName:"",levelRequired:200,multiplier:20,capacity:310,ticketPrice:2e3,speedModifier:1.38},{id:"Airbus A340",fullName:"",levelRequired:210,multiplier:21,capacity:320,ticketPrice:2100,speedModifier:1.4},{id:"Boeing 787",fullName:"",levelRequired:220,multiplier:22,capacity:330,ticketPrice:2200,speedModifier:1.42},{id:"Airbus A350",fullName:"",levelRequired:230,multiplier:23,capacity:350,ticketPrice:2300,speedModifier:1.44},{id:"Boeing 747",fullName:"",levelRequired:240,multiplier:24,capacity:380,ticketPrice:2400,speedModifier:1.46},{id:"Airbus A380",fullName:"",levelRequired:250,multiplier:25,capacity:400,ticketPrice:2500,speedModifier:1.48}],cc._RF.pop()},{}],Airports:[function(e,i,t){"use strict";cc._RF.push(i,"0d43d02viNHOKJKxjgZmRMR","Airports"),Object.defineProperty(t,"__esModule",{value:!0});var o=e("./UISystem");t.airports=function(){return{view:function(){return m("div.modal",{style:{background:"#fff"}},[m("div.header.block",["Airports",m(m.route.Link,{class:"close",href:"/main"},o.icon("cancel"))])])}}},cc._RF.pop()},{"./UISystem":"UISystem"}],ChangeAirlineName:[function(e,i,t){"use strict";cc._RF.push(i,"1f6994j6TxFX5jTor9TrxPm","ChangeAirlineName"),Object.defineProperty(t,"__esModule",{value:!0});var o=e("./UISystem");t.changeAirlineName=function(){function e(){cc.goto("/main")}return{view:function(){return m("div.modal",{style:{background:"#fff"}},[m("div.header.block","Set Your Airline's Name"),m("div.scrollable",[m("div",[m("input[type=text][autofocus]",{style:{margin:"2.5%",width:"95%",fontSize:16,padding:10,outline:"none"},value:"MyAirline"})])]),m("div.block",{style:{height:50,background:o.PRIMARY_COLOR,color:"#fff",textTransform:"uppercase"},onclick:e},"Next")])}}},cc._RF.pop()},{"./UISystem":"UISystem"}],ChooseYourBase:[function(e,i,t){"use strict";cc._RF.push(i,"91f7fLD4p5LHKPnDeCOetS0","ChooseYourBase"),Object.defineProperty(t,"__esModule",{value:!0});var o=e("../GameData"),n=e("./UISystem");t.chooseYourBase=function(){var e=Object.keys(o.AIRPORTS).sort(),i=e[0];function t(e){i=e}function r(){i&&o.AIRPORTS[i]&&(o.AIRPORTS[i].forEach(function(e){e.active=!0;var i=e.getWorldPosition();o.G.map.lookAtPos(i.x,i.y)}),o.D.addBase(i),cc.goto("/changeAirlineName"))}return{view:function(){return m("div.modal",{style:{background:"#fff"}},[m("div.header.block","Choose Your Base Airport"),m("div.scrollable",[m("div",e.map(function(e){return m("div.row",{key:e,style:{padding:10,borderBottom:"0.5px solid #eee",color:i===e?"#333":"#999"},onclick:function(){return t(e)}},[m("div",{style:{flex:1}},e),i===e?n.icon("check-mark",16):""])}))]),m("div.block",{style:{height:50,background:null===i?"#f1f1f1":n.PRIMARY_COLOR,color:null===i?"#999":"#fff",textTransform:"uppercase"},onclick:r},"Next")])}}},cc._RF.pop()},{"../GameData":"GameData","./UISystem":"UISystem"}],Config:[function(e,i,t){"use strict";cc._RF.push(i,"89690EA86xPlKNus8gbFhEC","Config"),Object.defineProperty(t,"__esModule",{value:!0}),t.REWARD_VIDEO_PLACEMENT_ID="431353620710356_433432173835834",t.INTERSTITIAL_PLACEMENT_ID="431353620710356_434140650431653",t.FB_APP_ID="431353620710356",t.CREDIT="Music<br>Wonderful - Calm Beautiful Piano Loop by ispeakwaves (freesound.org/people/ispeakwaves/)","undefined"!=typeof vConsole&&vConsole.hideSwitch(),cc._RF.pop()},{}],Demand:[function(e,i,t){"use strict";cc._RF.push(i,"059d9JyM7xB4omUZnhBa7lO","Demand"),Object.defineProperty(t,"__esModule",{value:!0}),t.DemandList=[{numberOfRoutes:1,demandForEachRoute:.5},{numberOfRoutes:2,demandForEachRoute:.33333334},{numberOfRoutes:3,demandForEachRoute:.25},{numberOfRoutes:4,demandForEachRoute:.2},{numberOfRoutes:5,demandForEachRoute:.16666667},{numberOfRoutes:6,demandForEachRoute:.14285715},{numberOfRoutes:7,demandForEachRoute:.125},{numberOfRoutes:8,demandForEachRoute:.11111111},{numberOfRoutes:9,demandForEachRoute:.1}],cc._RF.pop()},{}],EspionageSpin:[function(e,i,t){"use strict";cc._RF.push(i,"a6d3dsHhQZPdYjqR2bVDatB","EspionageSpin"),Object.defineProperty(t,"__esModule",{value:!0});var o=e("../Shared/FBService"),n=e("./GameData"),r=e("./Helper"),a=cc._decorator,c=a.ccclass,s=a.property,d=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.amount=null,i.money=null,i.coinPrefab=null,i._amount=0,i._delta=0,i._interval=.1,i._stop=!1,i._finished=!1,i}return __extends(i,e),i.prototype.stop=function(){this._stop=!0},i.prototype.onEnable=function(){this._stop=!1,this._finished=!1},i.prototype.update=function(e){var i=this;if(!this._finished){if(this._stop)return this._finished=!0,cc.takeScreenshot().then(function(e){return o.default.FBInstant(function(t){t.updateAsync({action:"CUSTOM",template:"INVITE",image:e,text:t.player.getName()+" has sent a spy and stolen $"+r.nf(i._amount)+" from your Airline!",data:{uuid:Date.now().toString(36),id:t.player.getID(),name:t.player.getName(),amount:i._amount}})})}),this.schedule(function(){return i._coinAnimation()},.1,5),this.scheduleOnce(function(){n.D.cash+=i._amount},1),void this.scheduleOnce(function(){return i.node.active=!1},1.5);this._delta+=e,this._delta>this._interval&&(this._delta=0,this._amount=cc.randf(1e4,99999),this.amount.string=this._amount.toString())}},i.prototype._coinAnimation=function(){var e=cc.instantiate(this.coinPrefab);e.position=cc.v2(0,0),e.scale=3,e.parent=this.node.parent;var i=cc.moveTo(1,this.money.position);i.easing(cc.easeOut(1.5)),e.runAction(cc.sequence(cc.spawn(i,cc.scaleTo(1,1),cc.fadeOut(1.2)),cc.callFunc(function(){return e.destroy()})))},__decorate([s(cc.Label)],i.prototype,"amount",void 0),__decorate([s(cc.Node)],i.prototype,"money",void 0),__decorate([s(cc.Prefab)],i.prototype,"coinPrefab",void 0),i=__decorate([c],i)}(cc.Component);t.default=d,cc._RF.pop()},{"../Shared/FBService":"FBService","./GameData":"GameData","./Helper":"Helper"}],Event:[function(e,i,t){"use strict";cc._RF.push(i,"9f4f3eThjlJH6o5AnQGnH/E","Event"),Object.defineProperty(t,"__esModule",{value:!0}),t.EventList=[{id:1,type:"negative",description:"Tension in middle east causes oil price to rise",modifierMin:-.2,modifierMax:-.15},{id:2,type:"negative",description:"Government announces a special oil import tax as trade war retaliation",modifierMin:-.2,modifierMax:-.1},{id:3,type:"negative",description:"Trade union asks for a salary increase for all staff",modifierMin:-.15,modifierMax:-.1},{id:4,type:"negative",description:"Central bank announces a 1% interest increase",modifierMin:-.1,modifierMax:-.1},{id:5,type:"negative",description:"Venezuela announces nationalization of oil industry",modifierMin:-.1,modifierMax:-.05},{id:6,type:"negative",description:"A trading error causes a sudden increase in oid price",modifierMin:-.05,modifierMax:-.01},{id:7,type:"negative",description:"An oil ship hit an iceberg and sunk",modifierMin:-.05,modifierMax:-.01},{id:8,type:"positive",description:"A breakthrough in solar power technology causes oil price to plummet",modifierMin:.15,modifierMax:.2},{id:9,type:"positive",description:"A historic moment: peace in middle east",modifierMin:.15,modifierMax:.2},{id:10,type:"positive",description:"Russia starts to export cheap oil to help with the national debt",modifierMin:.15,modifierMax:.2},{id:11,type:"positive",description:"Airplane manufacturers fined by regulators for price-fixing",modifierMin:.1,modifierMax:.15},{id:12,type:"positive",description:"Deals reached to end the trade war",modifierMin:.1,modifierMax:.15},{id:13,type:"positive",description:"An over supply of steel causes its price to drop",modifierMin:.08,modifierMax:.12},{id:14,type:"positive",description:"A new design shrink the space of economy seats",modifierMin:.01,modifierMax:.05},{id:15,type:"positive",description:"Government announces surprise corporate tax cut",modifierMin:.01,modifierMax:.05},{id:16,type:"negative",description:"Financial crisis causes global economy to plummet",modifierMin:-.3,modifierMax:-.25},{id:17,type:"negative",description:"All Boeing 787 MAXs are grounded due to recent incidents",modifierMin:-.3,modifierMax:-.25},{id:18,type:"negative",description:"New trend: rich people prefer private jet to first class",modifierMin:-.2,modifierMax:-.15},{id:19,type:"negative",description:"Lasting hot weather makes people travel less",modifierMin:-.15,modifierMax:-.15},{id:20,type:"negative",description:"High speed railway between major cities completed",modifierMin:-.1,modifierMax:-.1},{id:21,type:"negative",description:"Survey: staycation is in fashion again",modifierMin:-.1,modifierMax:-.05},{id:22,type:"negative",description:"An Icelandic volcano disrupts fly routes",modifierMin:-.05,modifierMax:-.03},{id:23,type:"negative",description:"Airport express way is in maintenance",modifierMin:-.05,modifierMax:-.025},{id:24,type:"negative",description:"A record year in aviation accidents",modifierMin:-.05,modifierMax:-.01},{id:25,type:"positive",description:"Your airline is ranked #1 in consumer survey",modifierMin:.2,modifierMax:.2},{id:26,type:"positive",description:"Your biggest competitor announces bankruptcy",modifierMin:.15,modifierMax:.2},{id:27,type:"positive",description:"People travel abroad to avoid terrible weather",modifierMin:.1,modifierMax:.15},{id:28,type:"positive",description:"GDP growth in this quarter beats Wall Street's' expectation",modifierMin:.1,modifierMax:.15},{id:29,type:"positive",description:"High speed rail accident: 12 people injured",modifierMin:.05,modifierMax:.1},{id:30,type:"positive",description:"Egypt grants visa-free entry in hope to boost tourism",modifierMin:.01,modifierMax:.05},{id:31,type:"positive",description:"To boost birth rate, government encourages people to travel more",modifierMin:.01,modifierMax:.05},{id:32,type:"positive",description:"More people join your loyal customer membership",modifierMin:.01,modifierMax:.05},{id:33,type:"uncertain",description:"Stock market had its most volatile month",modifierMin:-.02,modifierMax:.02},{id:34,type:"uncertain",description:"UK voted to leave EU, causing uncertainties",modifierMin:-.15,modifierMax:.15},{id:35,type:"uncertain",description:"It turns out nobody can understand Trump's tweet",modifierMin:-.2,modifierMax:.1},{id:36,type:"uncertain",description:"Unpredictable weather in the coming month",modifierMin:-.1,modifierMax:.1},{id:37,type:"uncertain",description:"Survey: analysts have mixed views on the economy",modifierMin:-.1,modifierMax:.15},{id:38,type:"uncertain",description:"Mathematicians: we have proved that the world is more random",modifierMin:-.1,modifierMax:.1},{id:39,type:"uncertain",description:"We are living in a world of uncertainties",modifierMin:-.1,modifierMax:.1},{id:40,type:"uncertain",description:"People are open to more travel options",modifierMin:-.1,modifierMax:.1},{id:41,type:"uncertain",description:"A bug in your computer system causes inaccurate operating reports",modifierMin:-.15,modifierMax:.1},{id:42,type:"uncertain",description:"Your CFO resigned after pressure from major shareholders",modifierMin:-.2,modifierMax:.1},{id:43,type:"uncertain",description:"Two of your competitors signed the merge deal",modifierMin:-.15,modifierMax:.1},{id:44,type:"uncertain",description:"Minister of Transportation resigned because of scandal",modifierMin:-.1,modifierMax:.15}],cc._RF.pop()},{}],Extensions:[function(e,i,t){"use strict";cc._RF.push(i,"9d27dzg/DNI/6qIaBnA+Bbr","Extensions"),Number.prototype.round=function(e){var i=Math.pow(10,e);return Math.round(this*i)/i},Array.prototype.randOne=function(){return this[Math.floor(this.length*Math.random())]},Array.prototype.shuffle=function(){for(var e,i=this.length-1;i>0;i--){var t=Math.floor(Math.random()*(i+1));e=[this[t],this[i]],this[i]=e[0],this[t]=e[1]}return this},Array.prototype.uniq=function(){return this.filter(function(e,i,t){return t.indexOf(e)===i})},Array.prototype.findLast=function(e){for(var i=this.length-1;i>=0;--i){var t=this[i];if(e(t))return t}return null},cc.Node.prototype.getWorldPosition=function(){var e=cc.v2();return this.parent.convertToWorldSpaceAR(this.position,e),e},cc.Node.prototype.setWorldPosition=function(e){var i=cc.v2();this.parent.convertToNodeSpaceAR(e,i),this.position=i},cc.Node.prototype.follow=function(e){var i=cc.v2();this.parent.convertToNodeSpaceAR(e.getWorldPosition(),i),this.position=i},cc.Node.prototype.angleTo=function(e){var i=e.sub(this.getWorldPosition());return 180*-Math.atan2(i.x,i.y)/Math.PI},cc.Node.prototype.getAttr=function(e){return this[e]},cc.Vec2.prototype.clampDistance=function(e,i){var t=this.mag();return t<e?this.normalize().mul(e):t>i?this.normalize().mul(i):this},cc.spriteFrameFromBase64=function(e){return new Promise(function(i,t){var o=new Image;o.src=e,o.onload=function(){var e=new cc.Texture2D;e.initWithElement(o),e.handleLoadedTexture();var t=new cc.SpriteFrame(e);i(t)}})},cc.takeScreenshot=function(){return new Promise(function(e,i){cc.director.on(cc.Director.EVENT_AFTER_DRAW,function(){var i=cc.game.canvas.toDataURL();cc.director.off(cc.Director.EVENT_AFTER_DRAW),e(i)})})},cc.normalizeAngle=function(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e},cc.randf=function(e,i){return e+Math.round(i*Math.random())},cc.goto=function(e){window.location.hash="!"+e},cc.urlIs=function(e){return window.location.hash==="!"+e},cc.hasScene=function(e){for(var i=0,t=cc.game.config.scenes;i<t.length;i++){if(t[i].url.endsWith(e+".fire"))return!0}return!1},cc.vibrate=function(e){return!!navigator.vibrate&&navigator.vibrate(e)},cc.Graphics&&(cc.Graphics.prototype.dashedLine=function(e,i,t,o){void 0===t&&(t=10),void 0===o&&(o=20);var n=e,r=0,a=i.sub(e);if(!(a.mag()<10))for(var c=a.normalize();(i.x-n.x)*c.x>=0&&(i.y-n.y)*c.y>=0;)r%2==0?(this.moveTo(n.x,n.y),n=n.add(c.mul(t))):(this.lineTo(n.x,n.y),n=n.add(c.mul(o))),r++}),cc._RF.pop()},{}],FBService:[function(e,i,t){"use strict";cc._RF.push(i,"db026AQaqVEKJ+ar5JtNZUB","FBService"),Object.defineProperty(t,"__esModule",{value:!0});var o=e("../Script/Config"),n={l:null,m:null,s:null},r=null,a=null,c=null,s=null,d=null,u=Date.now(),l=0,p=function(){function e(){}return e.FBInstant=function(e){this.isFB()&&e(FBInstant)},e.isFB=function(){return"undefined"!=typeof FBInstant},e.setScore=function(e){var i=this;if(this.isFB())return d&&d.getScore()>=e?Promise.resolve({rank:d.getRank(),score:d.getScore()}):FBInstant.getLeaderboardAsync("Global Leaderboard").then(function(i){return i.setScoreAsync(e)}).then(function(e){return c=null,s=null,d=e,i.setSessionData({myScore:e}),{rank:e.getRank(),score:e.getScore()}});var t=cc.sys.localStorage.getItem("personalBest");return(!t||e>t)&&(t=e),cc.sys.localStorage.setItem("personalBest",t),Promise.resolve({rank:null,score:t})},e.getScore=function(){var e=this;if(this.isFB())return d?Promise.resolve({rank:d.getRank(),score:d.getScore()}):FBInstant.getLeaderboardAsync("Global Leaderboard").then(function(e){return e.getPlayerEntryAsync()}).then(function(i){return i?(d=i,e.setSessionData({myScore:i}),{rank:i.getRank(),score:i.getScore()}):null});var i=cc.sys.localStorage.getItem("personalBest");return i?Promise.resolve({rank:null,score:parseInt(i,10)}):Promise.resolve(null)},e.getFriendsLeaderboard=function(){var e=this;return this.isFB()?c?Promise.resolve(c):FBInstant.getLeaderboardAsync("Global Leaderboard").then(function(e){return e.getConnectedPlayerEntriesAsync(100)}).then(function(i){return(c=i).find(function(e){return e.getPlayer().getID()===d.getPlayer().getID()})||c.push(d),e.setSessionData({leaderboard:c}),c}):Promise.reject(new Error("No FBInstant SDK"))},e.getGlobalLeaderboard=function(){return this.isFB()?s?Promise.resolve(s):FBInstant.getLeaderboardAsync("Global Leaderboard").then(function(e){return e.getEntriesAsync()}).then(function(e){return(s=e).find(function(e){return e.getPlayer().getID()===d.getPlayer().getID()})||s.push(d),s}):Promise.reject(new Error("No FBInstant SDK"))},e.setSessionData=function(e){this.isFB()&&(e.leaderboard&&(n.l=e.leaderboard.map(function(e){return[e.getPlayer().getName(),e.getScore(),e.getRank()]})),e.myScore&&(n.m=[e.myScore.getPlayer().getName(),e.myScore.getScore(),e.myScore.getRank()]),e.scheduledMessage&&(n.s=e.scheduledMessage),FBInstant.setSessionData(n))},e.logEvent=function(e,i,t){this.isFB()&&FBInstant.logEvent(e,i,t)},e.preloadRewardVideo=function(){if(this.isFB()){var e=null;return FBInstant.getRewardedVideoAsync(o.REWARD_VIDEO_PLACEMENT_ID).then(function(i){return(e=i).loadAsync()}).then(function(){r=e})}},e.preloadInterstitial=function(){if(this.isFB()){var e=null;return FBInstant.getInterstitialAdAsync(o.INTERSTITIAL_PLACEMENT_ID).then(function(i){return(e=i).loadAsync()}).then(function(){a=e})}},e.canShowRewardVideo=function(e){return void 0===e&&(e=0),null!==r&&Date.now()-l>1e3*e},e.canShowInterstitial=function(e){return void 0===e&&(e=0),null!==a&&Date.now()-u>1e3*e},e.showRewardVideo=function(){return r?r.showAsync().then(function(){r=null,l=Date.now(),e.preloadRewardVideo()}):Promise.reject(new Error("Failed to load ad"))},e.showInterstitial=function(){return a?a.showAsync().then(function(){u=Date.now(),a=null,e.preloadInterstitial()}):Promise.reject(new Error("Failed to load ad"))},e.matchInProgress=function(){return!1},e}();t.default=p,cc._RF.pop()},{"../Script/Config":"Config"}],GameConfig:[function(e,i,t){"use strict";cc._RF.push(i,"d875d9lo+1MlrwP0sYyVfGw","GameConfig"),Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigList=[{name:"offlineMaxEarningMinutes",value:120}],cc._RF.pop()},{}],GameData:[function(e,i,t){"use strict";cc._RF.push(i,"1e646Fq6TJNcomzweySbdsQ","GameData"),Object.defineProperty(t,"__esModule",{value:!0});var o=e("../Shared/FBService"),n=e("./ActiveRoute"),r=e("./Helper"),a=e("./IdleAirlineTycoon/OriginPopulation"),c=e("./IdleAirlineTycoon/Route");t.INITIAL_CASH=1e5,t.AIRPORTS={};var s=function(){function e(){this.cash=10,this.cashPerMin=0,this.gem=5,this.population={},this.routes=[],this._base=[]}return e.prototype.addBase=function(e){var i=this;this._base.push(e);var o=Object.keys(t.AIRPORTS).sort(function(i,t){return r.distance(e,i)[0]-r.distance(e,t)[0]}),s=c.RouteList[t.D.routes.length];this.population[e]?cc.warn("Adding a new origin "+e+" but the population is set already: population = "+this.population[e]):this.population[e]=a.OriginPopulationList.find(function(e){return e.originId===s.origin}).population,c.RouteList.filter(function(e){return e.origin===s.origin}).forEach(function(r,a){var c=new n.ActiveRoute(e,o[1+a],r.baseCost,r.id);i.population[c.destination]||(i.population[c.destination]=0),t.D.routes.push(c),t.AIRPORTS[c.origin].forEach(function(e){return e.active=!0}),t.AIRPORTS[c.destination].forEach(function(e){return e.active=!0})}),t.G.map.lookAtNode(t.AIRPORTS[e][0])},e.prototype.isBase=function(e){return-1!==this._base.indexOf(e)},e}();t.GameData=s;var d=!1;function u(e){return o.default.isFB()?FBInstant.player.setDataAsync({gameData:JSON.stringify(e)}):(cc.sys.localStorage.setItem("gameData",JSON.stringify(e)),Promise.resolve())}t.D=new Proxy(new s,{set:function(e,i,t){return e[i]=t,d=!0,!0}}),t.G={map:null},t.loadData=function(){if(!o.default.isFB()){var e=cc.sys.localStorage.getItem("gameData");return e?Promise.resolve(JSON.parse(e)):Promise.resolve(null)}return FBInstant.player.getDataAsync(["gameData"]).then(function(e){return e.gameData?JSON.parse(e.gameData):null})},t.saveData=u,setInterval(function(){d&&(d=!1,u(t.D).catch(function(){return d=!0}))},5e3),cc._RF.pop()},{"../Shared/FBService":"FBService","./ActiveRoute":"ActiveRoute","./Helper":"Helper","./IdleAirlineTycoon/OriginPopulation":"OriginPopulation","./IdleAirlineTycoon/Route":"Route"}],HUDCanvas:[function(e,i,t){"use strict";cc._RF.push(i,"19066ZvUIlIE42Wydp+uMzO","HUDCanvas"),Object.defineProperty(t,"__esModule",{value:!0});var o=e("../Shared/FBService"),n=e("./GameData"),r=cc._decorator,a=r.ccclass,c=r.property,s=null,d=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.kaching=null,i.newsIntro=null,i.spy=null,i.airport=[],i.spyImage=null,i.routes=null,i.camera=null,i.planePrefab=null,i.coinPrefab=null,i._cash=0,i._progress=0,i._deprecatedDialogShowing=!1,i}return __extends(i,e),i.instance=function(){return s},i.prototype.onLoad=function(){s=this,o.default.setSessionData({scheduledMessage:[{time:Date.now()+72e5,message:"Do you know your airline is earning money \ud83d\udcb5 even when you are away? Check out what you've earned!"},{time:Date.now()+864e5,message:"Your friends are sending spies to steal money \ud83d\udcb5 from your airline. Stop them now!"},{time:Date.now()+2592e5,message:"New fly routes are available. Expand the operation of your airline!"},{time:Date.now()+432e6,message:"You haven't managed your airline for a while. See what's happening to your airline!"},{time:Date.now()+6048e5,message:"Your airline is in crsis without your management. Save it from bankruptcy!"}]}),this.schedule(function(){m.redraw()},1,cc.macro.REPEAT_FOREVER,0),o.default.preloadRewardVideo(),o.default.preloadInterstitial()},i.prototype.update=function(e){var i=n.D.cash-this._cash;this._cash!==n.D.cash&&(this._cash+=Math.floor(i/2)),this.updateRoutes(e)},i.prototype.updateRoutes=function(e){var i=this;n.D.cashPerMin=0,n.D.routes.forEach(function(t){t.tick(e),n.D.cashPerMin+=t.cashPerMin(),t.originNode&&!t.destinationNode||t.calculateDistance();var o=t.originNode,r=t.destinationNode;if(!t.plane){var a=cc.instantiate(i.planePrefab);a.parent=i.routes,t.plane=a}t.plane.setWorldPosition(o.getWorldPosition().lerp(r.getWorldPosition(),t.location)),t.plane.angle=t.plane.angleTo(t.direction>0?r.getWorldPosition():o.getWorldPosition()),t.plane.scale=1/i.camera.zoomRatio,t.location>=1&&i._showCoin(r),t.location<=0&&i._showCoin(o)})},i.prototype._showCoin=function(e){var i=cc.instantiate(this.coinPrefab);i.parent=e,i.position=cc.Vec2.ZERO,i.scale=2,i.runAction(cc.sequence(cc.spawn(cc.moveBy(.5,0,200),cc.scaleTo(.5,1),cc.fadeOut(.5)),cc.callFunc(function(){return i.destroy()})))},__decorate([c({type:cc.AudioClip})],i.prototype,"kaching",void 0),__decorate([c({type:cc.AudioClip})],i.prototype,"newsIntro",void 0),__decorate([c({type:cc.AudioClip})],i.prototype,"spy",void 0),__decorate([c({type:[cc.AudioClip]})],i.prototype,"airport",void 0),__decorate([c({type:cc.Asset})],i.prototype,"spyImage",void 0),__decorate([c(cc.Node)],i.prototype,"routes",void 0),__decorate([c(cc.Camera)],i.prototype,"camera",void 0),__decorate([c(cc.Prefab)],i.prototype,"planePrefab",void 0),__decorate([c(cc.Prefab)],i.prototype,"coinPrefab",void 0),i=__decorate([a],i)}(cc.Component);t.default=d,cc._RF.pop()},{"../Shared/FBService":"FBService","./GameData":"GameData"}],Helper:[function(e,i,t){"use strict";cc._RF.push(i,"aec53iNO4FNnZ4lsDrFTqsx","Helper"),Object.defineProperty(t,"__esModule",{value:!0});var o=e("./GameData"),n=["","K","M","B","T","Qa","Qt","Sx","Sp","Oc","Nn","Dc","UDc","DDc","TDc","QaDc","QtDc","SxDc","SpDc","ODc","NDc","Vi","UVi","DVi","TVi","QaVi","QtVi","SxVi","SpVi","OcVi","NnVi","Tg","UTg","DTg","TTg","QaTg","QtTg","SxTg","SpTg","OcTg","NnTg","Qd","UQd","DQd","TQd","QaQd","QtQd","SxQd","SpQd","OcQd","NnQd","Qq","UQq","DQq","TQq","QaQq","QtQq","SxQq","SpQq","OcQq","NnQq","Sg"];t.nf=function(e){for(var i=0;e>=1e3;)e/=1e3,i++;return e=Math.floor(10*e)/10,i<n.length?e.toLocaleString()+n[i]:e.toLocaleString()+"E"+i},t.tf=function(e){var i=Math.floor(e),t=Math.round(60*(e-i));return i>0?i+"h"+t+"m":t+"m"},t.distance=function(e,i){var t=o.AIRPORTS[e],n=o.AIRPORTS[i],r=1/0,a=null,c=null;return t.forEach(function(e){n.forEach(function(i){var t=e.position.sub(i.position).mag();t<r&&(r=t,a=e,c=i)})}),[a,c,r]},cc._RF.pop()},{"./GameData":"GameData"}],Help:[function(e,i,t){"use strict";cc._RF.push(i,"92ebfOotA5CaqJm5JEPQ2Pu","Help"),Object.defineProperty(t,"__esModule",{value:!0});var o=cc._decorator,n=o.ccclass,r=o.property,a=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.tutorialAddRoute=null,i.helpShown=!1,i}return __extends(i,e),i.prototype.showHelp=function(){this.node.active=!0},i.prototype.onLoad=function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_START,function(){e.node.active=!1,e.tutorialAddRoute.active=!0})},__decorate([r(cc.Node)],i.prototype,"tutorialAddRoute",void 0),i=__decorate([n],i)}(cc.Component);t.default=a,cc._RF.pop()},{}],Hud:[function(e,i,t){"use strict";cc._RF.push(i,"9d3200wTOVFWKHGEJYBjuGI","Hud"),Object.defineProperty(t,"__esModule",{value:!0});var o=e("../GameData"),n=e("../Helper"),r=e("./UISystem");t.hud=function(){var e=100*cc.view.getFrameSize().height/cc.winSize.height;return{oncreate:function(){e=100*cc.view.getFrameSize().height/cc.winSize.height},view:function(){return m("div",[m("div.top-bar",[m("div.inner",{style:{flex:2}},[r.icon("money-stack",24),m("div.text","$"+n.nf(o.D.cash))]),m("div.inner",{style:{flex:2}},[r.icon("gear-hammer",24),m("div.text","$"+n.nf(o.D.cashPerMin)+"/min")]),m("div.inner",{style:{flex:1}},[r.icon("cut-diamond",24),m("div.text",n.nf(o.D.gem))])]),m("div.bottom-bar",{style:{height:e}},[m(m.route.Link,{class:"tab",href:"/routes"},[r.icon("radar-sweep",32),m("div","Routes")]),m("div.tab",[r.icon("modern-city",32),m("div","Airports")]),m("div.tab",[r.icon("upgrade",32),m("div","Upgrades")]),m("div.tab",[r.icon("office-chair",32),m("div","Manage")])])])}}},cc._RF.pop()},{"../GameData":"GameData","../Helper":"Helper","./UISystem":"UISystem"}],Newsflash:[function(e,i,t){"use strict";cc._RF.push(i,"06580lRvKNNsJFVEpH0PayX","Newsflash"),Object.defineProperty(t,"__esModule",{value:!0});var o=cc._decorator,n=o.ccclass,r=(o.property,null),a=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.count=0,i}return __extends(i,e),i.instance=function(){return r},i.prototype.onLoad=function(){r=this,this._label=this.getComponent(cc.Label)},i.prototype.update=function(e){},i=__decorate([n],i)}(cc.Component);t.default=a,cc._RF.pop()},{}],OriginPopulation:[function(e,i,t){"use strict";cc._RF.push(i,"c95befT4vdLi4m2pOQzEXhM","OriginPopulation"),Object.defineProperty(t,"__esModule",{value:!0}),t.OriginPopulationList=[{originId:1,population:200},{originId:2,population:500},{originId:3,population:1e3},{originId:4,population:2e3},{originId:5,population:5e3}],cc._RF.pop()},{}],OriginUpgrade:[function(e,i,t){"use strict";cc._RF.push(i,"65f306y8hBEKb0/sak4omz5","OriginUpgrade"),Object.defineProperty(t,"__esModule",{value:!0}),t.OriginUpgradeList=[{name:"Urbanization",populationModifier:1.5,cumulativePopulationModifier:1.5},{name:"Baby Boom",populationModifier:1.5,cumulativePopulationModifier:2.25},{name:"Child Tax Credit",populationModifier:1.5,cumulativePopulationModifier:3.375},{name:"Free Child Care",populationModifier:1.5,cumulativePopulationModifier:5.0625},{name:"More Parental Leave",populationModifier:1.5,cumulativePopulationModifier:7.59375},{name:"Broken Condoms",populationModifier:1.5,cumulativePopulationModifier:11.390625},{name:"Polygamy",populationModifier:1.5,cumulativePopulationModifier:17.085938}],cc._RF.pop()},{}],ResourceLoader:[function(e,i,t){"use strict";cc._RF.push(i,"66e0312J8tH6LelzFLTiO9T","ResourceLoader"),Object.defineProperty(t,"__esModule",{value:!0});var o=e("./UISystem"),n=cc._decorator,r=n.ccclass,a=n.property,c=!1,s=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.styles=[],i.iconFont=null,i}return __extends(i,e),i.prototype.onLoad=function(){var e=document.createElement("style");e.innerHTML=this.styles.join(""),document.head.appendChild(e),c||(o.StartUI(),c=!0)},__decorate([a({type:[cc.Asset]})],i.prototype,"styles",void 0),__decorate([a({type:cc.Asset})],i.prototype,"iconFont",void 0),i=__decorate([r],i)}(cc.Component);t.default=s,cc._RF.pop()},{"./UISystem":"UISystem"}],Routes:[function(e,i,t){"use strict";cc._RF.push(i,"8f8d94K9gpDKoGNumhXVSSc","Routes"),Object.defineProperty(t,"__esModule",{value:!0});var o=e("../GameData"),n=e("../Helper"),r=e("./UISystem");function a(e,i,t,o,n,r){return m("div.row",{style:{marginTop:5}},[m("div.box.text-center",[m("div.text-l",i),m("div.text-s",e)]),m("div.spacer"),m("div.box.text-center",[m("div.text-l",o),m("div.text-s",t)]),m("div.spacer"),m("div.box.text-center",[m("div.text-l",r),m("div.text-s",n)])])}t.routes=function(){var e;return{oninit:function(){o.D.routes.length<=0&&o.D.addBase(Object.keys(o.AIRPORTS)[0]),e=o.D.routes[0]},view:function(){var i=e.airplane();return m("div.modal",{style:{background:"#fff"}},[m("div.header.block",["Routes",m(m.route.Link,{class:"close",href:"/main"},r.icon("cancel"))]),m("div.route-tabs",o.D.routes.map(function(i){return m("div.route-tab",{class:e===i?"active":"",onclick:function(){return e=i}},[m("div.route-name",[i.origin,m("br"),i.destination]),m("div.row",[r.icon("rank-3",16),i.level])])})),m("div.scrollable.border-top",{style:{padding:10}},[m("div.row",{style:{justifyContent:"center"}},[m("div",{style:{flex:1}},[m("div.text-xl",e.originCode()),e.originCity()]),m("div",{style:{flex:1,textAlign:"center",color:"#999"}},m("div.airplane",{style:{transform:"scaleX("+e.direction+")"}},r.icon("airplane",36))),m("div",{style:{flex:1,textAlign:"right"}},[m("div.text-xl",e.destinationCode()),e.destinationCity()])]),m("br"),m("div.row",[r.icon("biplane",32,5),"Airplane"]),m("div.row",[m("div.text-l",{style:{flex:1}},i.id+": Level "+e.level),m("div.route-cost",{onclick:function(){return e.upgrade()}},"$"+n.nf(e.upgradeCost()))]),a("Passenger",e.passengerCount,"En Route",e.direction>0?e.destinationCity():e.originCity(),"Arrive in",n.tf(e.flightTimeLeft())),a("Capacity",i.capacity,"Ticket $",i.ticketPrice,"Speed (MPH)",e.speed()),m("br"),m("div.row",[r.icon("speedometer",28,5),"Route"]),a("Miles",n.nf(e.distance),"Flight Time",n.tf(e.duration()),"Avg. Occupancy",n.nf(100*e.averageOccupancy())+"%"),m("br"),m("div.row",[r.icon("castle-2",28,5),e.origin]),a("Population",n.nf(o.D.population[e.origin]),"Demand",n.nf(e.originDemand()),"Occupancy",n.nf(100*e.originOccupancy())+"%"),m("br"),m("div.row",[r.icon("castle-2",28,5),e.destination]),a("Population",n.nf(o.D.population[e.destination]),"Demand",n.nf(e.destinationDemand()),"Occupancy",n.nf(100*e.destinationOccupancy())+"%")])])}}},t.infoBlock=a,cc._RF.pop()},{"../GameData":"GameData","../Helper":"Helper","./UISystem":"UISystem"}],Route:[function(e,i,t){"use strict";cc._RF.push(i,"be465KVwoFEoJgjXpPeNjbX","Route"),Object.defineProperty(t,"__esModule",{value:!0}),t.RouteList=[{id:1,origin:1,destination:1,baseCost:1,unlockCost:0},{id:2,origin:1,destination:2,baseCost:50,unlockCost:0},{id:3,origin:1,destination:3,baseCost:250,unlockCost:0},{id:4,origin:1,destination:4,baseCost:1250,unlockCost:0},{id:5,origin:2,destination:1,baseCost:3e3,unlockCost:5e4},{id:6,origin:2,destination:2,baseCost:15e3,unlockCost:0},{id:7,origin:2,destination:3,baseCost:75e3,unlockCost:0},{id:8,origin:2,destination:4,baseCost:15e4,unlockCost:0},{id:9,origin:3,destination:1,baseCost:3e5,unlockCost:5e6},{id:10,origin:3,destination:2,baseCost:45e4,unlockCost:0},{id:11,origin:3,destination:3,baseCost:9e5,unlockCost:0},{id:12,origin:3,destination:4,baseCost:125e4,unlockCost:0},{id:13,origin:4,destination:1,baseCost:25e5,unlockCost:3e7},{id:14,origin:4,destination:2,baseCost:5e6,unlockCost:0},{id:15,origin:4,destination:3,baseCost:9e6,unlockCost:0},{id:16,origin:4,destination:4,baseCost:125e5,unlockCost:0},{id:17,origin:5,destination:1,baseCost:25e6,unlockCost:3e8},{id:18,origin:5,destination:2,baseCost:5e7,unlockCost:0},{id:19,origin:5,destination:3,baseCost:75e6,unlockCost:0},{id:20,origin:5,destination:4,baseCost:12e7,unlockCost:0},{id:21,origin:6,destination:1,baseCost:3e8,unlockCost:5e9},{id:22,origin:6,destination:2,baseCost:5e8,unlockCost:0},{id:23,origin:6,destination:3,baseCost:9e8,unlockCost:0},{id:24,origin:6,destination:4,baseCost:15e8,unlockCost:0}],cc._RF.pop()},{}],TutorialAddRoute:[function(e,i,t){"use strict";cc._RF.push(i,"c5fce8ZgJ9DrYkzFba6TLW8","TutorialAddRoute"),Object.defineProperty(t,"__esModule",{value:!0});var o=e("./GameData"),n=cc._decorator,r=n.ccclass,a=(n.property,function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.onEnable=function(){this.node.runAction(cc.repeatForever(cc.sequence(cc.moveBy(.5,0,20),cc.moveBy(.5,0,-20))))},i.prototype.update=function(){o.D.routes.length>0&&(this.node.active=!1)},i=__decorate([r],i)}(cc.Component));t.default=a,cc._RF.pop()},{"./GameData":"GameData"}],UISystem:[function(e,i,t){"use strict";cc._RF.push(i,"3d480TACOFKNpQ/1NDhCDDM","UISystem"),Object.defineProperty(t,"__esModule",{value:!0});var o=e("./Airports"),n=e("./ChangeAirlineName"),r=e("./ChooseYourBase"),a=e("./Hud"),c=e("./Routes");t.PRIMARY_COLOR="#FFC13F",t.icon=function(e,i,t){return void 0===i&&(i=24),void 0===t&&(t=0),m("i.game-icon",{class:"game-icon-"+e,style:{fontSize:i+"px",marginRight:t+"px"}},"")},t.StartUI=function(){var e=document.createElement("div"),i=document.createElement("div");document.body.append(e),document.body.append(i),m.route(i,"/main",{"/main":{view:function(){return""}},"/chooseYourBase":r.chooseYourBase,"/changeAirlineName":n.changeAirlineName,"/routes":c.routes,"/airports":o.airports}),m.mount(e,a.hud),cc.goto("/routes")},t.level={},cc._RF.pop()},{"./Airports":"Airports","./ChangeAirlineName":"ChangeAirlineName","./ChooseYourBase":"ChooseYourBase","./Hud":"Hud","./Routes":"Routes"}],WorldMap:[function(e,i,t){"use strict";cc._RF.push(i,"9ec8fWTtihG554wgKjptTYR","WorldMap"),Object.defineProperty(t,"__esModule",{value:!0});var o=e("./GameData"),n=cc._decorator,r=n.ccclass,a=n.property,c=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.camera=null,i.airports=null,i}return __extends(i,e),i.prototype.lookAtPos=function(e,i){var t=this._getRectBounds();this.camera.node.position=cc.v2(cc.misc.clampf(e,t.minX,t.maxX),cc.misc.clampf(i,t.minY,t.maxY))},i.prototype.lookAtNode=function(e){var i=this._getRectBounds();this.camera.node.follow(e),this.camera.node.position=cc.v2(cc.misc.clampf(this.camera.node.x,i.minX,i.maxX),cc.misc.clampf(this.camera.node.y,i.minY,i.maxY))},i.prototype.onLoad=function(){o.G.map=this,this.airports.children.forEach(function(e){var i=e.getComponentInChildren(cc.Label);if(i){var t=i.string;o.AIRPORTS[t]?o.AIRPORTS[t].push(e):o.AIRPORTS[t]=[e]}e.active=!1})},i.prototype.start=function(){var e=this,i=null,t=0;this.node.on(cc.Node.EventType.MOUSE_WHEEL,function(i){i.getScrollY()>0?e._setZoom(1.1*e.camera.zoomRatio):e._setZoom(e.camera.zoomRatio/1.1)}),this.node.on(cc.Node.EventType.TOUCH_START,function(t){i=e.camera.node.position}),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(o){var n=o.getTouches();if(n.length>=2){var r=n[0],a=n[1],c=r.getDelta(),s=a.getDelta(),d=e.node.parent.convertToNodeSpaceAR(r.getLocation()),u=e.node.parent.convertToNodeSpaceAR(a.getLocation()),l=d.sub(u),p=c.sub(s),m=1;return m=Math.abs(l.x)>Math.abs(l.y)?(l.x+p.x)/l.x*e.camera.zoomRatio:(l.y+p.y)/l.y*e.camera.zoomRatio,e._setZoom(m),void(t=Date.now())}if(!(Date.now()-t<500)){var f=o.getStartLocation(),h=o.getLocation();e.lookAtPos(i.x+(f.x-h.x)/e.camera.zoomRatio,i.y+(f.y-h.y)/e.camera.zoomRatio)}}),this.minScale=Math.max(cc.winSize.width/this.node.width,cc.winSize.height/this.node.height),this._setZoom(this.minScale)},i.prototype._getRectBounds=function(){var e=cc.winSize.width,i=cc.winSize.height,t=this.node.x+this.node.width/2-e/this.camera.zoomRatio/2,o=this.node.x-this.node.width/2+e/this.camera.zoomRatio/2;return{maxX:t,maxY:this.node.y+this.node.height/2-i/this.camera.zoomRatio/2,minX:o,minY:this.node.y-this.node.height/2+i/this.camera.zoomRatio/2}},i.prototype._setZoom=function(e){var i=this;e=cc.misc.clampf(e,this.minScale,Math.max(2*this.minScale,1)),this.camera.zoomRatio=e,this.airports.children.forEach(function(t){var o=cc.misc.clampf(1/e,0,1);t.scale=o,t.children.forEach(function(t){return t.active=o<1||e>=2*i.minScale})});var t=this._getRectBounds();this.camera.node.position=cc.v2(cc.misc.clampf(this.camera.node.x,t.minX,t.maxX),cc.misc.clampf(this.camera.node.y,t.minY,t.maxY))},__decorate([a(cc.Camera)],i.prototype,"camera",void 0),__decorate([a(cc.Node)],i.prototype,"airports",void 0),i=__decorate([r],i)}(cc.Component);t.default=c,cc._RF.pop()},{"./GameData":"GameData"}]},{},["ActiveRoute","Config","EspionageSpin","GameData","HUDCanvas","Help","Helper","Airplane","Demand","Event","GameConfig","OriginPopulation","OriginUpgrade","Route","Newsflash","TutorialAddRoute","Airports","ChangeAirlineName","ChooseYourBase","Hud","ResourceLoader","Routes","UISystem","WorldMap","Extensions","FBService"]);